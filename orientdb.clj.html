<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>orientdb.clj documentation</title></head><body><div id="header"><h1><a href="index.html">Orientdb.clj 0.1.0-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><span>Namespaces</span></h3><ul><li class="current"><a href="orientdb.clj.html"><span>orientdb.clj</span></a></li><li><a href="orientdb.clj.cache.html"><span>orientdb.clj.cache</span></a></li><li><a href="orientdb.clj.cluster.html"><span>orientdb.clj.cluster</span></a></li><li><a href="orientdb.clj.hook.html"><span>orientdb.clj.hook</span></a></li><li><a href="orientdb.clj.kv.html"><span>orientdb.clj.kv</span></a></li><li><a href="orientdb.clj.schema.html"><span>orientdb.clj.schema</span></a></li><li><a href="orientdb.clj.script.html"><span>orientdb.clj.script</span></a></li><li><a href="orientdb.clj.sql.html"><span>orientdb.clj.sql</span></a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="orientdb.clj.html#var-*db*"><span>*db*</span></a></li><li><a href="orientdb.clj.html#var--%3Eblob"><span>-&gt;blob</span></a></li><li><a href="orientdb.clj.html#var--%3Ejson"><span>-&gt;json</span></a></li><li><a href="orientdb.clj.html#var--%3Emap"><span>-&gt;map</span></a></li><li><a href="orientdb.clj.html#var-blob-%3E"><span>blob-&gt;</span></a></li><li><a href="orientdb.clj.html#var-blob%3F"><span>blob?</span></a></li><li><a href="orientdb.clj.html#var-close-db%21"><span>close-db!</span></a></li><li><a href="orientdb.clj.html#var-cluster-id%3D%3E"><span>cluster-id=&gt;</span></a></li><li><a href="orientdb.clj.html#var-cluster-position%3D%3E"><span>cluster-position=&gt;</span></a></li><li><a href="orientdb.clj.html#var-create-db%21"><span>create-db!</span></a></li><li><a href="orientdb.clj.html#var-db-exists%3F"><span>db-exists?</span></a></li><li><a href="orientdb.clj.html#var-db-info"><span>db-info</span></a></li><li><a href="orientdb.clj.html#var-db-open%3F"><span>db-open?</span></a></li><li><a href="orientdb.clj.html#var-delete%21"><span>delete!</span></a></li><li><a href="orientdb.clj.html#var-document"><span>document</span></a></li><li><a href="orientdb.clj.html#var-document%3F"><span>document?</span></a></li><li><a href="orientdb.clj.html#var-drop-db%21"><span>drop-db!</span></a></li><li><a href="orientdb.clj.html#var-id"><span>id</span></a></li><li><a href="orientdb.clj.html#var-id%3F"><span>id?</span></a></li><li><a href="orientdb.clj.html#var-insert-documents%21"><span>insert-documents!</span></a></li><li><a href="orientdb.clj.html#var-load"><span>load</span></a></li><li><a href="orientdb.clj.html#var-load-json%21"><span>load-json!</span></a></li><li><a href="orientdb.clj.html#var-open-db"><span>open-db</span></a></li><li><a href="orientdb.clj.html#var-save%21"><span>save!</span></a></li><li><a href="orientdb.clj.html#var-tx"><span>tx</span></a></li><li><a href="orientdb.clj.html#var-undo%21"><span>undo!</span></a></li><li><a href="orientdb.clj.html#var-with-db"><span>with-db</span></a></li><li><a href="orientdb.clj.html#var-with-db%2B"><span>with-db+</span></a></li><li><a href="orientdb.clj.html#var-with-intent"><span>with-intent</span></a></li></ul></div><div class="namespace-docs" id="content"><h2>orientdb.clj documentation</h2><pre class="doc"></pre><div class="public" id="var-*db*"><h3>*db*</h3><div class="usage"></div><pre class="doc">The currently active DB connection.
</pre></div><div class="public" id="var--%3Eblob"><h3>-&gt;blob</h3><div class="usage"><code>(-&gt;blob bytes|input-stream)</code></div><pre class="doc">Returns an ORecordBytes blob with the given data.
</pre></div><div class="public" id="var--%3Ejson"><h3>-&gt;json</h3><div class="usage"><code>(-&gt;json doc &amp; [String format])</code></div><pre class="doc">Transforms the record to JSON, optionally specifying formatting settings.

Format settings are separated by comma. Available settings are:
  rid: exports the record's id as property &quot;@rid&quot;.
  version: exports the record's version as property &quot;@version&quot;.
  class: exports the record's class as property &quot;@class&quot;.
  attribSameRow: exports all the record attributes in the same row.
  indent:&lt;level&gt;: Indents the output with the level specified. Defaults to 0.

Example: &quot;rid,version,class,indent:6&quot; exports record id, version and class properties
along with record properties using an indenting level equals of 6.

If a format is not specified, the default is &quot;rid,version,class,attribSameRow,indent:2&quot;.</pre></div><div class="public" id="var--%3Emap"><h3>-&gt;map</h3><div class="usage"><code>(-&gt;map doc)</code></div><pre class="doc">
</pre></div><div class="public" id="var-blob-%3E"><h3>blob-&gt;</h3><div class="usage"><code>(blob-&gt; blob output-stream)</code></div><pre class="doc">Writes out the contents of an ORecordBytes blob to the given output stream.
</pre></div><div class="public" id="var-blob%3F"><h3>blob?</h3><div class="usage"><code>(blob? x)</code></div><pre class="doc">
</pre></div><div class="public" id="var-close-db%21"><h3>close-db!</h3><div class="usage"><code>(close-db!)</code><code>(close-db! db)</code></div><pre class="doc">
</pre></div><div class="public" id="var-cluster-id%3D%3E"><h3>cluster-id=&gt;</h3><div class="usage"><code>(cluster-id=&gt; id)</code></div><pre class="doc">An ORID's cluster ID.
</pre></div><div class="public" id="var-cluster-position%3D%3E"><h3>cluster-position=&gt;</h3><div class="usage"><code>(cluster-position=&gt; id)</code></div><pre class="doc">An ORID's cluster position.
</pre></div><div class="public" id="var-create-db%21"><h3>create-db!</h3><div class="usage"><code>(create-db! location)</code><code>(create-db! location user password)</code></div><pre class="doc">Creates a new database either locally or remotely if it doesn't already exist. Doesn't return a DB instance.
When passed an username and password, a connection to the remote server will be established to create the database.</pre></div><div class="public" id="var-db-exists%3F"><h3>db-exists?</h3><div class="usage"><code>(db-exists?)</code><code>(db-exists? db)</code></div><pre class="doc">
</pre></div><div class="public" id="var-db-info"><h3>db-info</h3><div class="usage"><code>(db-info)</code><code>(db-info db)</code></div><pre class="doc">Information relevant to the DB as a map with keys #{:name, :url, :user, :status, :size, :clusters, :properties, :default-cluster-id}.
</pre></div><div class="public" id="var-db-open%3F"><h3>db-open?</h3><div class="usage"><code>(db-open?)</code><code>(db-open? db)</code></div><pre class="doc">
</pre></div><div class="public" id="var-delete%21"><h3>delete!</h3><div class="usage"><code>(delete! x)</code></div><pre class="doc">Deletes a record if it is passed or if its ORID is passed.
If either a vector or an edge are passed, the necessary clean-up will be taken care of.</pre></div><div class="public" id="var-document"><h3>document</h3><div class="usage"><code>(document class)</code><code>(document class attrs)</code></div><pre class="doc">A new document of the given class with the given attributes.
</pre></div><div class="public" id="var-document%3F"><h3>document?</h3><div class="usage"><code>(document? x)</code></div><pre class="doc">
</pre></div><div class="public" id="var-drop-db%21"><h3>drop-db!</h3><div class="usage"><code>(drop-db!)</code><code>(drop-db! db)</code></div><pre class="doc">
</pre></div><div class="public" id="var-id"><h3>id</h3><div class="usage"><code>(id cluster position)</code></div><pre class="doc">Returns an ORID.
</pre></div><div class="public" id="var-id%3F"><h3>id?</h3><div class="usage"><code>(id? x)</code></div><pre class="doc">
</pre></div><div class="public" id="var-insert-documents%21"><h3>insert-documents!</h3><div class="usage"><code>(insert-documents! doc-maps)</code></div><pre class="doc">Massively inserts documents into the database in an efficient manner.
The documents must be passed as a sequence of maps.
Each document must have a :&amp;class key and an (optional) :&amp;cluster key</pre></div><div class="public" id="var-load"><h3>load</h3><div class="usage"><code>(load id)</code><code>(load id fetch-plan)</code></div><pre class="doc">Loads a document, given an ID.
</pre></div><div class="public" id="var-load-json%21"><h3>load-json!</h3><div class="usage"><code>(load-json! doc json)</code></div><pre class="doc">Fills the record parsing the content in JSON format.
</pre></div><div class="public" id="var-open-db"><h3>open-db</h3><div class="usage"><code>(open-db location user password)</code></div><pre class="doc">Returns an OGraphDatabase instance.
</pre></div><div class="public" id="var-save%21"><h3>save!</h3><div class="usage"><code>(save! doc)</code><code>(save! doc cluster-name|force-create)</code><code>(save! doc cluster-name force-create)</code></div><pre class="doc">Saves a document.
</pre></div><div class="public" id="var-tx"><h3>tx</h3><div class="usage"><code>(tx &amp; forms)</code></div><pre class="doc">Evaluates the given forms inside a transaction.
If an exception arises, the transaction will fail inmediately and do an automatic rollback.
The exception will be re-thrown for the user to catch it.</pre></div><div class="public" id="var-undo%21"><h3>undo!</h3><div class="usage"><code>(undo! doc)</code></div><pre class="doc">Undoes local changes to documents.
</pre></div><div class="public" id="var-with-db"><h3>with-db</h3><div class="usage"><code>(with-db db &amp; forms)</code></div><pre class="doc">
</pre></div><div class="public" id="var-with-db%2B"><h3>with-db+</h3><div class="usage"><code>(with-db+ db &amp; forms)</code></div><pre class="doc">Same as with-db, but also opens a connection in the *db* var in blueprints.clj
</pre></div><div class="public" id="var-with-intent"><h3>with-intent</h3><div class="usage"><code>(with-intent intent &amp; body)</code></div><pre class="doc">'intent' must be in #{:massive-read, :massive-write, nil}.
Nil means &quot;no intent&quot;.</pre></div></div></body></html>